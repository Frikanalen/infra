# {{ ansible_managed }}
# PBX (Asterisk/FreePBX) port forwarding rules

pbx_ext_ip = "{{ pbx_ext_ip }}"
pbx_int_ip = "{{ pbx_int_ip }}"
ext_if = "{{ fw_ext_if }}"

# SIP signaling
rdr on $ext_if proto { tcp, udp } from any to $pbx_ext_ip port 5060 -> $pbx_int_ip port 5060

# RTP media ports
rdr on $ext_if proto udp from any to $pbx_ext_ip port 10000:11000 -> $pbx_int_ip

# Pass rules
pass in quick on $ext_if proto { tcp, udp } from any to $pbx_int_ip port 5060
pass in quick on $ext_if proto udp from any to $pbx_int_ip port 10000:11000
